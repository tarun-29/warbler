{"ast":null,"code":"import _objectWithoutProperties from \"/Users/tarunkantiwal/Desktop/React/warbler/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport apiCall from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"../actions/error\";\nexport function setCurrentUser(user) {\n  return {\n    type: SET_CURRENT_USER,\n    user\n  };\n}\nexport function authUser(type, userData) {\n  return dispatch => {\n    return new Promise((resolve, reject) => {\n      return apiCall('post', `/api/auth/${type}`, userData).then((_ref) => {\n        let token = _ref.token,\n            user = _objectWithoutProperties(_ref, [\"token\"]);\n\n        localStorage.setItem(\"jwtToken\", token);\n        dispatch(setCurrentUser(user));\n        dispatch(removeError());\n        resolve();\n      }).catch(err => {\n        dispatch(addError(err.message));\n        reject();\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/tarunkantiwal/Desktop/React/warbler/client/src/store/actions/auth.js"],"names":["apiCall","SET_CURRENT_USER","addError","removeError","setCurrentUser","user","type","authUser","userData","dispatch","Promise","resolve","reject","then","token","localStorage","setItem","catch","err","message"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,oBAApB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,kBAAtC;AAEA,OAAO,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;AACjC,SAAM;AACFC,IAAAA,IAAI,EAAEL,gBADJ;AAEFI,IAAAA;AAFE,GAAN;AAIH;AAED,OAAO,SAASE,QAAT,CAAkBD,IAAlB,EAAwBE,QAAxB,EAAkC;AACrC,SAAOC,QAAQ,IAAI;AACf,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAmB;AAClC,aAAOZ,OAAO,CAAC,MAAD,EAAU,aAAYM,IAAK,EAA3B,EAA8BE,QAA9B,CAAP,CACNK,IADM,CACD,UAAoB;AAAA,YAAlBC,KAAkB,QAAlBA,KAAkB;AAAA,YAART,IAAQ;;AACtBU,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC;AACAL,QAAAA,QAAQ,CAACL,cAAc,CAACC,IAAD,CAAf,CAAR;AACAI,QAAAA,QAAQ,CAACN,WAAW,EAAZ,CAAR;AACAQ,QAAAA,OAAO;AACV,OANM,EAONM,KAPM,CAOAC,GAAG,IAAE;AACRT,QAAAA,QAAQ,CAACP,QAAQ,CAACgB,GAAG,CAACC,OAAL,CAAT,CAAR;AACAP,QAAAA,MAAM;AACT,OAVM,CAAP;AAWH,KAZM,CAAP;AAaH,GAdD;AAeH","sourcesContent":["import apiCall from \"../../services/api\";\nimport { SET_CURRENT_USER } from \"../actionTypes\";\nimport { addError, removeError } from \"../actions/error\"\n\nexport function setCurrentUser(user) {\n    return{\n        type: SET_CURRENT_USER,\n        user\n    }\n}\n\nexport function authUser(type, userData) {\n    return dispatch => {\n        return new Promise((resolve, reject)=>{\n            return apiCall('post', `/api/auth/${type}`, userData)\n            .then(({token, ...user})=>{\n                localStorage.setItem(\"jwtToken\", token)\n                dispatch(setCurrentUser(user));\n                dispatch(removeError())\n                resolve();\n            })\n            .catch(err=>{\n                dispatch(addError(err.message));\n                reject();\n            })\n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}